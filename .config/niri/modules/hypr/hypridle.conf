# ================================
# HyprIdle Configuration (Suspend-then-Hibernate)
# ================================
# Flow:
#   2 min  → Dim display to 20%
#   3 min  → Lock screen (Hyprlock)
#   5 min  → Suspend (then auto-hibernate per systemd)
# Additional:
#   - Display shuts off before suspend
#   - Notifications on wake/resume
# ================================

general {
    # Command to lock the screen
    lock_cmd = hyprlock

    # Turn display off right before sleeping to save battery
    before_sleep_cmd = brightnessctl set 0%
    ignore_dbus_inhibit = false
    ignore_systemd_inhibit = false
}

# --- DIM DISPLAY (2 min idle) ---
listener {
    timeout = 60
    on-timeout = brightnessctl set 20%
    on-resume = brightnessctl set 100% && notify-send "HyprIdle" "Welcome back! Brightness restored to 100%."
}

# --- LOCK SCREEN (3 min idle) ---
listener {
    timeout = 180
    on-timeout = hyprlock
    on-resume = notify-send "HyprIdle" "Screen unlocked or session resumed."
}

# --- SUSPEND → (Then Hibernate per systemd) (5 min idle) ---
listener {
    timeout = 300
    on-timeout = notify-send "HyprIdle" "System suspending... (Hibernate will follow automatically)" && systemctl suspend-then-hibernate
    on-resume = notify-send "HyprIdle" "System resumed from suspend or hibernation."
}

